"use strict";(self.webpackChunk_pixi_layout=self.webpackChunk_pixi_layout||[]).push([[711],{"./src/Layout.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Layout});var lib=__webpack_require__("./node_modules/@pixi/display/lib/index.mjs"),text_lib=__webpack_require__("./node_modules/@pixi/text/lib/index.mjs"),constants=__webpack_require__("./src/utils/constants.ts"),core_lib=__webpack_require__("./node_modules/@pixi/core/lib/index.mjs");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function rgba2Hex(_ref){var _ref2=_slicedToArray(_ref,3),r=_ref2[0],g=_ref2[1],b=_ref2[2];return parseInt("0x".concat(getHex(r)).concat(getHex(g)).concat(getHex(b)),16)}function getHex(n){var hex=n.toString(16);return 1===hex.length?"0".concat(hex):hex}function hsl2Hex(h,s,l){l/=100;var a=s*Math.min(l,1-l)/100,f=function f(n){var k=(n+h/30)%12,color=l-a*Math.max(Math.min(k-3,9-k,1),-1);return Math.round(255*color).toString(16).padStart(2,"0")};return core_lib.P6.string2hex("#".concat(f(0)).concat(f(8)).concat(f(4)))}function getColor(color){if("transparent"!==color&&void 0!==color)switch(_typeof(color)){case"string":if(color.startsWith("#")||color.startsWith("0x"))return{hex:core_lib.P6.string2hex(color),opacity:1};if(color.startsWith("rgba(")){var colorData=color.slice(5,-1).split(",");return{hex:rgba2Hex(colorData.map((function(v){return parseInt(v,10)}))),opacity:parseFloat(colorData[3])}}if(color.startsWith("rgb(")){var _rgbData=color.slice(5,-1).split(",").map((function(v){return parseInt(v,10)}));return{hex:core_lib.P6.rgb2hex(_rgbData),opacity:1}}if(color.startsWith("hsla(")){var _colorData2=color.slice(5,-1).split(","),_colorData2$map2=_slicedToArray(_colorData2.map((function(v){return parseInt(v,10)})),3);return{hex:hsl2Hex(_colorData2$map2[0],_colorData2$map2[1],_colorData2$map2[2]),opacity:parseFloat(_colorData2[3])}}if(Object.keys(constants.D4).includes(color))return{hex:constants.D4[color],opacity:1};throw new Error("Unknown color format: ".concat(color));case"number":return{hex:color,opacity:1};default:return{hex:parseInt(color,16),opacity:1}}}function getNumber(value,maxPercentValue){if(void 0!==value){if("number"==typeof value)return value;if("string"==typeof value){if(value.endsWith("px"))return Math.floor(parseInt(value.slice(0,-2),10));if(value.endsWith("%")){var val=parseInt(value.slice(0,-1),10);return Math.floor(maxPercentValue?maxPercentValue/100*val:val)}return Math.floor(parseInt(value,10))}return 0}}function stylesToPixiTextStyles(styles){var _styles$fill,_getColor,_styles$wordWrapWidth,resultStyles={align:null==styles?void 0:styles.textAlign,breakWords:null==styles?void 0:styles.breakWords,dropShadow:null==styles?void 0:styles.dropShadow,dropShadowAlpha:null==styles?void 0:styles.dropShadowAlpha,dropShadowAngle:null==styles?void 0:styles.dropShadowAngle,dropShadowBlur:null==styles?void 0:styles.dropShadowBlur,dropShadowColor:null==styles?void 0:styles.dropShadowColor,dropShadowDistance:null==styles?void 0:styles.dropShadowDistance,fill:null!==(_styles$fill=null==styles?void 0:styles.fill)&&void 0!==_styles$fill?_styles$fill:null===(_getColor=getColor(null==styles?void 0:styles.color))||void 0===_getColor?void 0:_getColor.hex,fillGradientType:null==styles?void 0:styles.fillGradientType,fillGradientStops:null==styles?void 0:styles.fillGradientStops,fontFamily:null==styles?void 0:styles.fontFamily,fontSize:null==styles?void 0:styles.fontSize,fontStyle:null==styles?void 0:styles.fontStyle,fontVariant:null==styles?void 0:styles.fontVariant,fontWeight:null==styles?void 0:styles.fontWeight,letterSpacing:null==styles?void 0:styles.letterSpacing,lineHeight:null==styles?void 0:styles.lineHeight,lineJoin:null==styles?void 0:styles.lineJoin,miterLimit:null==styles?void 0:styles.miterLimit,stroke:null==styles?void 0:styles.stroke,strokeThickness:null==styles?void 0:styles.strokeThickness,textBaseline:null==styles?void 0:styles.textBaseline,trim:null==styles?void 0:styles.trim,whiteSpace:null==styles?void 0:styles.whiteSpace,wordWrap:null==styles?void 0:styles.wordWrap,wordWrapWidth:null!==(_styles$wordWrapWidth=null==styles?void 0:styles.wordWrapWidth)&&void 0!==_styles$wordWrapWidth?_styles$wordWrapWidth:100,leading:null==styles?void 0:styles.leading};for(var key in resultStyles)void 0===resultStyles[key]&&delete resultStyles[key];return resultStyles}function isItJustAText(layout){return 1===layout.content.children.size&&layout.content.children.entries().next().value[1]instanceof text_lib.xv}function AlignController_typeof(o){return AlignController_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},AlignController_typeof(o)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,key=function _toPrimitive(input,hint){if("object"!==AlignController_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==AlignController_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"),"symbol"===AlignController_typeof(key)?key:String(key)),descriptor)}var arg,key}var AlignController=function(){function AlignController(layout){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AlignController),this.layout=layout}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(AlignController,[{key:"resize",value:function resize(parentWidth,parentHeight){this.setSelfPosition(parentWidth,parentHeight),this.layout.content.resize(this.layout.width,this.layout.height),this.alignChildren(this.layout.width,this.layout.height)}},{key:"alignChildren",value:function alignChildren(parentWidth,parentHeight){var _style$paddingTop,_style$paddingRight,_style$paddingBottom,_style$paddingLeft,_this=this,maxChildHeight=0,style=this.layout.style,paddingTop=null!==(_style$paddingTop=style.paddingTop)&&void 0!==_style$paddingTop?_style$paddingTop:0,paddingRight=null!==(_style$paddingRight=style.paddingRight)&&void 0!==_style$paddingRight?_style$paddingRight:0,paddingBottom=null!==(_style$paddingBottom=style.paddingBottom)&&void 0!==_style$paddingBottom?_style$paddingBottom:0,paddingLeft=null!==(_style$paddingLeft=style.paddingLeft)&&void 0!==_style$paddingLeft?_style$paddingLeft:0,x=paddingLeft,y=paddingTop;this.layout.content.children.forEach((function(child){if(child.height||child.width)if(child instanceof text_lib.xv&&isItJustAText(_this.layout)){var _availableWidth=parentWidth-paddingLeft-paddingRight,align=style.textAlign;child.width<_availableWidth?"center"===align?(child.anchor.x=.5,child.x=parentWidth/2):"right"===align?(child.anchor.x=1,child.x=parentWidth-paddingRight):(child.anchor.x=0,child.x=paddingLeft):(child.anchor.x=0,child.x=paddingLeft);var verticalAlign=style.verticalAlign,availableHeight=parentHeight-paddingTop-paddingBottom;child.height<availableHeight?"middle"===verticalAlign?(child.anchor.y=.5,child.y=parentHeight/2):"bottom"===verticalAlign?(child.anchor.y=1,child.y=parentHeight-paddingBottom):(child.anchor.y=0,child.y=paddingTop):(child.anchor.y=0,child.y=paddingTop)}else{var childDisplay="inline-block",childMarginLeft=0,childMarginRight=0,childMarginTop=0,childMarginBottom=0;if(child instanceof Layout){childDisplay=child.style.display;var childPosition=child.style.position;if(childMarginLeft=child.style.marginLeft,childMarginRight=child.style.marginRight,childMarginTop=child.style.marginTop,childMarginBottom=child.style.marginBottom,void 0!==childPosition)return}var anchorX=0,anchorY=0;void 0===style.position&&(anchorX=void 0!==style.anchorX?style.anchorX*_this.layout.width:0,anchorY=void 0!==style.anchorY?style.anchorY*_this.layout.height:0),child.x=x+childMarginLeft-anchorX,child.y=y+childMarginTop-anchorY,child.height+childMarginTop+childMarginBottom>maxChildHeight&&(maxChildHeight=child.height+childMarginTop+childMarginBottom);var availableWidth=parentWidth-paddingRight;"block"===childDisplay&&child.width<availableWidth&&(childDisplay="inline-block");var isFeetParentWidth=x+child.width+childMarginRight<=availableWidth,isFirstChild=child===_this.layout.content.firstChild;switch(childDisplay){case"inline":case"inline-block":isFeetParentWidth||isFirstChild?x+=child.width+childMarginRight:(x=paddingLeft+child.width+childMarginRight,y+=maxChildHeight,child.x=paddingLeft+childMarginLeft,child.y=y+childMarginTop);break;default:y+=child.height+childMarginBottom}}}))}},{key:"setSelfPosition",value:function setSelfPosition(parentWidth,parentHeight){var _ref=this.layout.style||{},position=_ref.position,marginRight=_ref.marginRight,marginBottom=_ref.marginBottom,marginTop=_ref.marginTop,marginLeft=_ref.marginLeft,style=this.layout.style;if(position){var scaleX=this.layout.container.scale.x,scaleY=this.layout.container.scale.y,width=this.layout.width*scaleX,height=this.layout.height*scaleY,anchorX=style.anchorX,anchorY=style.anchorY,finalPosition={x:0,y:0};switch(position){case"rightTop":case"topRight":case"right":finalPosition.x=parentWidth-marginRight-width*(null!=anchorX?anchorX:1),finalPosition.y=marginTop-height*(null!=anchorY?anchorY:0);break;case"leftBottom":case"bottomLeft":case"bottom":finalPosition.x=marginLeft-width*(null!=anchorX?anchorX:0),finalPosition.y=parentHeight-marginBottom-height*(null!=anchorY?anchorY:1);break;case"rightBottom":case"bottomRight":finalPosition.x=parentWidth-marginRight-width*(null!=anchorX?anchorX:1),finalPosition.y=parentHeight-marginBottom-height*(null!=anchorY?anchorY:1);break;case"center":finalPosition.x=parentWidth/2-width*(null!=anchorX?anchorX:.5)+marginLeft,finalPosition.y=parentHeight/2-height*(null!=anchorY?anchorY:.5)+marginTop;break;case"centerTop":case"topCenter":finalPosition.x=parentWidth/2-width*(null!=anchorX?anchorX:.5)+marginLeft,finalPosition.y=marginTop-height*(null!=anchorY?anchorY:0);break;case"centerBottom":case"bottomCenter":finalPosition.x=parentWidth/2-width*(null!=anchorX?anchorX:.5)+marginLeft,finalPosition.y=parentHeight-marginBottom-height*(null!=anchorY?anchorY:1);break;case"centerLeft":case"leftCenter":finalPosition.x=marginLeft-width*(null!=anchorX?anchorX:0),finalPosition.y=parentHeight/2-height*(null!=anchorY?anchorY:.5)+marginTop;break;case"centerRight":case"rightCenter":finalPosition.x=parentWidth-marginRight-width*(null!=anchorX?anchorX:1),finalPosition.y=parentHeight/2-height*(null!=anchorY?anchorY:.5)+marginTop;break;default:finalPosition.x=marginLeft-width*(null!=anchorX?anchorX:0),finalPosition.y=marginTop-height*(null!=anchorY?anchorY:0)}this.layout.container.position.set(finalPosition.x,finalPosition.y)}}}]),AlignController}();function StyleController_typeof(o){return StyleController_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},StyleController_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function StyleController_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,StyleController_toPropertyKey(descriptor.key),descriptor)}}function _defineProperty(obj,key,value){return(key=StyleController_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function StyleController_toPropertyKey(arg){var key=function StyleController_toPrimitive(input,hint){if("object"!==StyleController_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==StyleController_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===StyleController_typeof(key)?key:String(key)}var StyleController=function(){function StyleController(layout,styles){!function StyleController_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StyleController),_defineProperty(this,"styles",{}),_defineProperty(this,"_textStyle",{}),_defineProperty(this,"conditionalStyles",{}),this.layout=layout,this.set(styles)}return function StyleController_createClass(Constructor,protoProps,staticProps){return protoProps&&StyleController_defineProperties(Constructor.prototype,protoProps),staticProps&&StyleController_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(StyleController,[{key:"set",value:function set(styles){var _ref,_styles$overflow,_ref2,_styles$display,_ref3,_styles$borderRadius,_ref4,_styles$zIndex,_ref5,_styles$opacity,_styles$maxWidth,_styles$maxHeight,_styles$minWidth,_styles$minHeight,_ref6,_styles$padding,_ref7,_ref8,_styles$paddingTop,_ref9,_ref10,_styles$paddingRight,_ref11,_ref12,_styles$paddingBottom,_ref13,_ref14,_styles$paddingLeft,_ref15,_styles$margin,_ref16,_ref17,_styles$marginTop,_ref18,_ref19,_styles$marginRight,_ref20,_ref21,_styles$marginBottom,_ref22,_ref23,_styles$marginLeft,_ref24,_styles$scale,_ref25,_ref26,_styles$scaleX,_ref27,_ref28,_styles$scaleY,_ref29,_styles$width,_ref30,_styles$height,_styles$wordWrap,_ref31,_styles$background,_styles$textAlign,_styles$position,_ref32,_styles$verticalAlign,_ref33,_styles$aspectRatio,_ref34,_styles$visible;this.styles.overflow=null!==(_ref=null!==(_styles$overflow=null==styles?void 0:styles.overflow)&&void 0!==_styles$overflow?_styles$overflow:this.styles.overflow)&&void 0!==_ref?_ref:constants.qk[0],this.styles.display=null!==(_ref2=null!==(_styles$display=null==styles?void 0:styles.display)&&void 0!==_styles$display?_styles$display:this.styles.display)&&void 0!==_ref2?_ref2:"inline-block",this.styles.borderRadius=null!==(_ref3=null!==(_styles$borderRadius=null==styles?void 0:styles.borderRadius)&&void 0!==_styles$borderRadius?_styles$borderRadius:this.styles.borderRadius)&&void 0!==_ref3?_ref3:0,this.styles.zIndex=null!==(_ref4=null!==(_styles$zIndex=null==styles?void 0:styles.zIndex)&&void 0!==_styles$zIndex?_styles$zIndex:this.styles.zIndex)&&void 0!==_ref4?_ref4:1,this.opacity=null!==(_ref5=null!==(_styles$opacity=null==styles?void 0:styles.opacity)&&void 0!==_styles$opacity?_styles$opacity:this.styles.opacity)&&void 0!==_ref5?_ref5:1,this.styles.maxWidth=null!==(_styles$maxWidth=null==styles?void 0:styles.maxWidth)&&void 0!==_styles$maxWidth?_styles$maxWidth:this.styles.maxWidth,this.styles.maxHeight=null!==(_styles$maxHeight=null==styles?void 0:styles.maxHeight)&&void 0!==_styles$maxHeight?_styles$maxHeight:this.styles.maxHeight,this.styles.minWidth=null!==(_styles$minWidth=null==styles?void 0:styles.minWidth)&&void 0!==_styles$minWidth?_styles$minWidth:this.styles.minWidth,this.styles.minHeight=null!==(_styles$minHeight=null==styles?void 0:styles.minHeight)&&void 0!==_styles$minHeight?_styles$minHeight:this.styles.minHeight,this.styles.padding=null!==(_ref6=null!==(_styles$padding=null==styles?void 0:styles.padding)&&void 0!==_styles$padding?_styles$padding:this.styles.padding)&&void 0!==_ref6?_ref6:0,this.styles.paddingTop=null!==(_ref7=null!==(_ref8=null!==(_styles$paddingTop=null==styles?void 0:styles.paddingTop)&&void 0!==_styles$paddingTop?_styles$paddingTop:null==styles?void 0:styles.padding)&&void 0!==_ref8?_ref8:this.styles.paddingTop)&&void 0!==_ref7?_ref7:0,this.styles.paddingRight=null!==(_ref9=null!==(_ref10=null!==(_styles$paddingRight=null==styles?void 0:styles.paddingRight)&&void 0!==_styles$paddingRight?_styles$paddingRight:null==styles?void 0:styles.padding)&&void 0!==_ref10?_ref10:this.styles.paddingRight)&&void 0!==_ref9?_ref9:0,this.styles.paddingBottom=null!==(_ref11=null!==(_ref12=null!==(_styles$paddingBottom=null==styles?void 0:styles.paddingBottom)&&void 0!==_styles$paddingBottom?_styles$paddingBottom:null==styles?void 0:styles.padding)&&void 0!==_ref12?_ref12:this.styles.paddingBottom)&&void 0!==_ref11?_ref11:0,this.styles.paddingLeft=null!==(_ref13=null!==(_ref14=null!==(_styles$paddingLeft=null==styles?void 0:styles.paddingLeft)&&void 0!==_styles$paddingLeft?_styles$paddingLeft:null==styles?void 0:styles.padding)&&void 0!==_ref14?_ref14:this.styles.paddingLeft)&&void 0!==_ref13?_ref13:0,this.styles.margin=null!==(_ref15=null!==(_styles$margin=null==styles?void 0:styles.margin)&&void 0!==_styles$margin?_styles$margin:this.styles.margin)&&void 0!==_ref15?_ref15:0,this.styles.marginTop=null!==(_ref16=null!==(_ref17=null!==(_styles$marginTop=null==styles?void 0:styles.marginTop)&&void 0!==_styles$marginTop?_styles$marginTop:null==styles?void 0:styles.margin)&&void 0!==_ref17?_ref17:this.styles.marginTop)&&void 0!==_ref16?_ref16:0,this.styles.marginRight=null!==(_ref18=null!==(_ref19=null!==(_styles$marginRight=null==styles?void 0:styles.marginRight)&&void 0!==_styles$marginRight?_styles$marginRight:null==styles?void 0:styles.margin)&&void 0!==_ref19?_ref19:this.styles.marginRight)&&void 0!==_ref18?_ref18:0,this.styles.marginBottom=null!==(_ref20=null!==(_ref21=null!==(_styles$marginBottom=null==styles?void 0:styles.marginBottom)&&void 0!==_styles$marginBottom?_styles$marginBottom:null==styles?void 0:styles.margin)&&void 0!==_ref21?_ref21:this.styles.marginBottom)&&void 0!==_ref20?_ref20:0,this.styles.marginLeft=null!==(_ref22=null!==(_ref23=null!==(_styles$marginLeft=null==styles?void 0:styles.marginLeft)&&void 0!==_styles$marginLeft?_styles$marginLeft:null==styles?void 0:styles.margin)&&void 0!==_ref23?_ref23:this.styles.marginLeft)&&void 0!==_ref22?_ref22:0,this.styles.scale=null!==(_ref24=null!==(_styles$scale=null==styles?void 0:styles.scale)&&void 0!==_styles$scale?_styles$scale:this.styles.scale)&&void 0!==_ref24?_ref24:1,this.styles.scaleX=null!==(_ref25=null!==(_ref26=null!==(_styles$scaleX=null==styles?void 0:styles.scaleX)&&void 0!==_styles$scaleX?_styles$scaleX:null==styles?void 0:styles.scale)&&void 0!==_ref26?_ref26:this.styles.scaleX)&&void 0!==_ref25?_ref25:1,this.styles.scaleY=null!==(_ref27=null!==(_ref28=null!==(_styles$scaleY=null==styles?void 0:styles.scaleY)&&void 0!==_styles$scaleY?_styles$scaleY:null==styles?void 0:styles.scale)&&void 0!==_ref28?_ref28:this.styles.scaleY)&&void 0!==_ref27?_ref27:1,this.styles.width=null!==(_ref29=null!==(_styles$width=null==styles?void 0:styles.width)&&void 0!==_styles$width?_styles$width:this.styles.width)&&void 0!==_ref29?_ref29:"auto",this.styles.height=null!==(_ref30=null!==(_styles$height=null==styles?void 0:styles.height)&&void 0!==_styles$height?_styles$height:this.styles.height)&&void 0!==_ref30?_ref30:"auto",this.styles.wordWrap=null!==(_styles$wordWrap=null==styles?void 0:styles.wordWrap)&&void 0!==_styles$wordWrap&&_styles$wordWrap,void 0!==(null==styles?void 0:styles.anchorX)?this.styles.anchorX=styles.anchorX:void 0!==(null==styles?void 0:styles.anchor)&&("number"==typeof styles.anchor?this.styles.anchorX=styles.anchor:Array.isArray(styles.anchor)&&(this.styles.anchorX=styles.anchor[0])),void 0!==(null==styles?void 0:styles.anchorY)?this.styles.anchorY=styles.anchorY:void 0!==(null==styles?void 0:styles.anchor)&&("number"==typeof styles.anchor?this.styles.anchorY=styles.anchor:Array.isArray(styles.anchor)&&void 0!==styles.anchor[1]&&(this.styles.anchorY=styles.anchor[1])),this.styles.background=null!==(_ref31=null!==(_styles$background=null==styles?void 0:styles.background)&&void 0!==_styles$background?_styles$background:null==styles?void 0:styles.backgroundColor)&&void 0!==_ref31?_ref31:this.styles.background,this.styles.textAlign=null!==(_styles$textAlign=null==styles?void 0:styles.textAlign)&&void 0!==_styles$textAlign?_styles$textAlign:this.styles.textAlign,this.styles.position=null!==(_styles$position=null==styles?void 0:styles.position)&&void 0!==_styles$position?_styles$position:this.styles.position,this.styles.verticalAlign=null!==(_ref32=null!==(_styles$verticalAlign=null==styles?void 0:styles.verticalAlign)&&void 0!==_styles$verticalAlign?_styles$verticalAlign:this.styles.verticalAlign)&&void 0!==_ref32?_ref32:constants.oX[0],this.styles.aspectRatio=null!==(_ref33=null!==(_styles$aspectRatio=null==styles?void 0:styles.aspectRatio)&&void 0!==_styles$aspectRatio?_styles$aspectRatio:this.styles.aspectRatio)&&void 0!==_ref33?_ref33:"static",this.styles.visible=null===(_ref34=null!==(_styles$visible=null==styles?void 0:styles.visible)&&void 0!==_styles$visible?_styles$visible:this.styles.visible)||void 0===_ref34||_ref34,this.visible=this.styles.visible,this._textStyle=stylesToPixiTextStyles(styles),styles&&this.separateConditionalStyles(styles)}},{key:"get",value:function get(style){return this.styles[style]}},{key:"getAll",value:function getAll(){return this.styles}},{key:"textStyle",get:function get(){return this._textStyle}},{key:"opacity",get:function get(){return this.styles.opacity},set:function set(value){this.styles.opacity=value,this.layout.container.alpha=value}},{key:"visible",get:function get(){return this.layout.container.visible},set:function set(value){this.layout.container.visible=value}},{key:"applyConditionalStyles",value:function applyConditionalStyles(){this.hasConditionalStyles&&this.set(_objectSpread(_objectSpread({},this.defaultStyles),this.layout.isRootLayoutPortrait?this.conditionalStyles.portrait:this.conditionalStyles.landscape))}},{key:"separateConditionalStyles",value:function separateConditionalStyles(styles){styles.portrait||styles.landscape?(styles.portrait&&(this.conditionalStyles.portrait=_objectSpread(_objectSpread({},this.conditionalStyles.portrait),styles.portrait)),styles.landscape&&(this.conditionalStyles.landscape=_objectSpread(_objectSpread({},this.conditionalStyles.landscape),styles.landscape)),delete styles.portrait,delete styles.landscape,this.defaultStyles=styles):this.defaultStyles=_objectSpread({},styles)}},{key:"hasConditionalStyles",get:function get(){return Object.keys(this.conditionalStyles).length>0}}]),StyleController}(),sprite_lib=__webpack_require__("./node_modules/@pixi/sprite/lib/index.mjs"),graphics_lib=__webpack_require__("./node_modules/@pixi/graphics/lib/index.mjs"),mesh_extras_lib=__webpack_require__("./node_modules/@pixi/mesh-extras/lib/index.mjs");function SizeController_typeof(o){return SizeController_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},SizeController_typeof(o)}function SizeController_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,SizeController_toPropertyKey(descriptor.key),descriptor)}}function SizeController_defineProperty(obj,key,value){return(key=SizeController_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function SizeController_toPropertyKey(arg){var key=function SizeController_toPrimitive(input,hint){if("object"!==SizeController_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==SizeController_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===SizeController_typeof(key)?key:String(key)}var SizeController=function(){function SizeController(layout){!function SizeController_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SizeController),SizeController_defineProperty(this,"parentWidth",0),SizeController_defineProperty(this,"parentHeight",0),this.layout=layout}return function SizeController_createClass(Constructor,protoProps,staticProps){return protoProps&&SizeController_defineProperties(Constructor.prototype,protoProps),staticProps&&SizeController_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(SizeController,[{key:"resize",value:function resize(parentWidth,parentHeight){var _this$layout$containe,_this$layout$containe2,_this$layout$containe3,_this$layout$containe4,_this$innerText,finalWidth=0,finalHeight=0;void 0!==parentWidth&&(this.parentWidth=parentWidth),void 0!==parentHeight&&(this.parentHeight=parentHeight);var _this$layout$style=this.layout.style,width=_this$layout$style.width,height=_this$layout$style.height,maxWidth=_this$layout$style.maxWidth,maxHeight=_this$layout$style.maxHeight,minWidth=_this$layout$style.minWidth,minHeight=_this$layout$style.minHeight,scaleX=_this$layout$style.scaleX,scaleY=_this$layout$style.scaleY,background=_this$layout$style.background,paddingLeft=_this$layout$style.paddingLeft,paddingRight=_this$layout$style.paddingRight,paddingTop=_this$layout$style.paddingTop,paddingBottom=_this$layout$style.paddingBottom,aspectRatio=_this$layout$style.aspectRatio,widthModificator=this.getAutoSizeModificator(width),heightModificator=this.getAutoSizeModificator(height);switch(widthModificator){case"innerText":this.innerText.style.wordWrap=!1;var paddings=paddingLeft+paddingRight+(null!==(_this$layout$containe=null===(_this$layout$containe2=this.layout.container.parent)||void 0===_this$layout$containe2||null===(_this$layout$containe2=_this$layout$containe2.layout)||void 0===_this$layout$containe2||null===(_this$layout$containe2=_this$layout$containe2.style)||void 0===_this$layout$containe2?void 0:_this$layout$containe2.paddingLeft)&&void 0!==_this$layout$containe?_this$layout$containe:0)+(null!==(_this$layout$containe3=null===(_this$layout$containe4=this.layout.container.parent)||void 0===_this$layout$containe4||null===(_this$layout$containe4=_this$layout$containe4.layout)||void 0===_this$layout$containe4||null===(_this$layout$containe4=_this$layout$containe4.style)||void 0===_this$layout$containe4?void 0:_this$layout$containe4.paddingRight)&&void 0!==_this$layout$containe3?_this$layout$containe3:0),availableSpaceHor=this.parentWidth-paddings;this.innerText.width+paddings>this.parentWidth&&(this.innerText.style.wordWrap=!0,this.innerText.style.wordWrapWidth=availableSpaceHor),finalWidth=this.innerText.width+paddingLeft+paddingRight;break;case"background":finalWidth=background.width;break;case"contentSize":var childrenWidth=0;this.layout.content.resize(this.parentWidth,this.parentHeight);var firstChild=this.layout.content.firstChild;firstChild&&firstChild.layout?childrenWidth+=firstChild.width+firstChild.layout.style.marginLeft+firstChild.layout.style.marginRight:firstChild instanceof lib.W2&&firstChild.width&&(childrenWidth+=firstChild.width),this.layout.content.children.forEach((function(child){if(child!==firstChild)if(child.layout&&"block"!==child.layout.style.display){if(child.layout.style.position)return;childrenWidth+=child.width+child.layout.style.marginLeft}else child instanceof lib.W2&&child.width&&(childrenWidth+=child.width)})),finalWidth=childrenWidth+paddingLeft+paddingRight;break;case"parentSize":finalWidth=this.parentWidth;break;default:finalWidth=getNumber(width,this.parentWidth)}switch(heightModificator){case"innerText":finalHeight=(null===(_this$innerText=this.innerText)||void 0===_this$innerText?void 0:_this$innerText.height)+paddingBottom+paddingTop;break;case"background":finalHeight=background.height;break;case"parentSize":finalHeight=this.parentHeight;break;case"contentSize":var childrenHeight=0;this.layout.content.resize(this.parentWidth,this.parentHeight);var _this$innerText2,_firstChild=this.layout.content.firstChild;if(_firstChild instanceof lib.W2&&_firstChild.height?childrenHeight+=_firstChild.height:_firstChild&&_firstChild.layout&&(_firstChild.layout.style.position||(childrenHeight+=_firstChild.height)),this.layout.content.children.forEach((function(child){child!==_firstChild&&(child.layout&&child.layout.style.position||(child.layout&&"block"===child.layout.style.display?childrenHeight+=child.height:child.height>childrenHeight&&(childrenHeight=child.height)))})),isItJustAText(this.layout))finalHeight=null===(_this$innerText2=this.innerText)||void 0===_this$innerText2?void 0:_this$innerText2.height;finalHeight=childrenHeight+paddingTop+paddingBottom;break;default:finalHeight=getNumber(height,this.parentHeight)}if(background instanceof mesh_extras_lib.ZT){var bg=this.layout.style.background;bg.height=finalHeight,bg.width=finalWidth}finalWidth<0&&(finalWidth=0),finalHeight<0&&(finalHeight=0),this._width=finalWidth,this._height=finalHeight,this.layout.container.scale.set(scaleX,scaleY),("flex"===aspectRatio||maxWidth||maxHeight||minWidth||minHeight)&&this.fitToSize(this.parentWidth,this.parentHeight),this.fitInnerText(finalWidth,finalHeight),0!==this._width&&0!==this._height?(this.updateBG(),this.updateMask(),this.layout.align.resize(this.parentWidth,this.parentHeight)):this.layout.container.visible=!1}},{key:"updateBG",value:function updateBG(){var background=this.layout.style.background;if(background instanceof lib.W2)background instanceof sprite_lib.j&&background.anchor.set(0),this.bg=background,this.layout.container.addChildAt(this.bg,0);else{var color="transparent"!==background&&getColor(background),borderRadius=this.layout.style.borderRadius,width=this.width,height=this.height;if(color&&width&&height){this.bg||(this.bg=new graphics_lib.TC,this.layout.container.addChildAt(this.bg,0));var x=0,y=0,_this$layout$style2=this.layout.style,anchorX=_this$layout$style2.anchorX,anchorY=_this$layout$style2.anchorY;void 0!==anchorX&&(x-=width*anchorX),void 0!==anchorY&&(y-=height*anchorY),this.bg instanceof graphics_lib.TC&&this.bg.clear().beginFill(color.hex,color.opacity).drawRoundedRect(x,y,width,height,borderRadius)}else this.bg&&(this.layout.container.removeChild(this.bg),delete this.bg)}}},{key:"updateMask",value:function updateMask(){var _this$layout$style3=this.layout.style,overflow=_this$layout$style3.overflow,borderRadius=_this$layout$style3.borderRadius,width=this.width,height=this.height;if("hidden"===overflow&&width&&height){this.overflowMask||(this.overflowMask=new graphics_lib.TC,this.layout.container.addChild(this.overflowMask));var x=0,y=0,_this$layout$style4=this.layout.style,anchorX=_this$layout$style4.anchorX,anchorY=_this$layout$style4.anchorY;void 0!==anchorX&&(x-=width*anchorX),void 0!==anchorY&&(y-=height*anchorY),this.overflowMask.clear().beginFill(16777215).drawRoundedRect(x,y,width,height,borderRadius).endFill(),this.layout.container.mask=this.overflowMask}else this.layout.container.mask=null,delete this.overflowMask}},{key:"fitInnerText",value:function fitInnerText(width,height){if(isItJustAText(this.layout)){var _this$layout$style5=this.layout.style,paddingLeft=_this$layout$style5.paddingLeft,paddingRight=_this$layout$style5.paddingRight,paddingTop=_this$layout$style5.paddingTop,paddingBottom=_this$layout$style5.paddingBottom;if(this.innerText.style.wordWrap){var _this$layout$containe5,_this$layout$containe6,scale=null!==(_this$layout$containe5=null===(_this$layout$containe6=this.layout.container)||void 0===_this$layout$containe6?void 0:_this$layout$containe6.scale.x)&&void 0!==_this$layout$containe5?_this$layout$containe5:1;this.innerText.style.wordWrapWidth=(width-paddingLeft-paddingRight)*scale}else{this.innerText.scale.set(1);var textWidth=this.innerText.width+paddingLeft+paddingRight,textHeight=this.innerText.height+paddingTop+paddingBottom,horScale=width/(textWidth+paddingLeft+paddingRight),vertScale=height/(textHeight+paddingBottom+paddingTop);(textWidth>width||textHeight>height)&&this.innerText.scale.set(Math.min(horScale,vertScale))}}}},{key:"getAutoSizeModificator",value:function getAutoSizeModificator(size){var _this$layout$style6=this.layout.style,background=_this$layout$style6.background,display=_this$layout$style6.display;return"auto"!==size?"static":"block"===display?"parentSize":background instanceof lib.W2&&background.width&&background.height?"background":isItJustAText(this.layout)&&this.layout.style.wordWrap?"innerText":"auto"===size?"contentSize":"static"}},{key:"innerText",get:function get(){return isItJustAText(this.layout)?this.layout.content.firstChild:null}},{key:"width",get:function get(){return this._width},set:function set(width){this._width=getNumber(width,this.parentWidth),this.layout.align.resize(this.parentWidth,this.parentHeight)}},{key:"height",get:function get(){return this._height},set:function set(height){this._height=getNumber(height,this.parentHeight),this.layout.align.resize(this.parentWidth,this.parentHeight)}},{key:"fitToSize",value:function fitToSize(parentWidth,parentHeight){var _this$layout$style7=this.layout.style,maxWidth=_this$layout$style7.maxWidth,maxHeight=_this$layout$style7.maxHeight,minWidth=_this$layout$style7.minWidth,minHeight=_this$layout$style7.minHeight,aspectRatio=_this$layout$style7.aspectRatio,_this$layout$style8=this.layout.style,marginLeft=_this$layout$style8.marginLeft,marginRight=_this$layout$style8.marginRight,marginBottom=_this$layout$style8.marginBottom,marginTop=_this$layout$style8.marginTop,currentScaleX=this.layout.container.scale.x,currentScaleY=this.layout.container.scale.y,layoutWidth=this.layout.width+marginLeft+marginRight,layoutHeight=this.layout.height+marginTop+marginBottom,maxWidthVal=getNumber(maxWidth,parentWidth),maxHeightVal=getNumber(maxHeight,parentHeight),minWidthVal=getNumber(minWidth,parentWidth),minHeightVal=getNumber(minHeight,parentHeight);if("flex"!==aspectRatio){var minFitScaleX=minWidthVal/layoutWidth,minFitScaleY=minHeightVal/layoutHeight,finalScaleX=currentScaleX,finalScaleY=currentScaleY;layoutWidth*currentScaleX>maxWidthVal&&(finalScaleX=maxWidthVal/layoutWidth),layoutHeight*currentScaleY>maxHeightVal&&(finalScaleY=maxHeightVal/layoutHeight);var finalScaleToFit=Math.min(finalScaleX,finalScaleY);if(minWidth||minHeight){var finalMinScaleToFit=finalScaleToFit;layoutWidth*finalScaleToFit<minWidthVal&&(finalMinScaleToFit=minFitScaleX),layoutHeight*finalScaleToFit<minHeightVal&&(finalMinScaleToFit=minFitScaleY),finalScaleToFit=Math.max(finalMinScaleToFit,finalMinScaleToFit)}this.layout.container.scale.set(finalScaleToFit)}else{var minWidthScale,minHeightScale;if(maxWidthVal&&this.width>maxWidthVal&&(this.width=maxWidthVal),maxHeightVal&&this.height>maxHeightVal&&(this.height=maxHeightVal),minWidthVal&&this.width<minWidthVal&&(minWidthScale=this.width/minWidthVal,this.width=minWidthVal),minHeightVal&&this.height<minHeightVal&&(minHeightScale=this.height/minHeightVal,this.height=minHeightVal),minWidthScale||minHeightScale){var _minWidthScale,scale=minWidthScale&&minHeightScale?Math.min(minWidthScale,minHeightScale):null!==(_minWidthScale=minWidthScale)&&void 0!==_minWidthScale?_minWidthScale:minHeightScale;this.layout.container.scale.set(scale)}}}}]),SizeController}();function ContentController_slicedToArray(arr,i){return function ContentController_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ContentController_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||ContentController_unsupportedIterableToArray(arr,i)||function ContentController_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ContentController_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return ContentController_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ContentController_arrayLikeToArray(o,minLen):void 0}}function ContentController_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ContentController_typeof(o){return ContentController_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ContentController_typeof(o)}function ContentController_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function ContentController_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ContentController_ownKeys(Object(t),!0).forEach((function(r){ContentController_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ContentController_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function ContentController_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,ContentController_toPropertyKey(descriptor.key),descriptor)}}function ContentController_defineProperty(obj,key,value){return(key=ContentController_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function ContentController_toPropertyKey(arg){var key=function ContentController_toPrimitive(input,hint){if("object"!==ContentController_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==ContentController_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===ContentController_typeof(key)?key:String(key)}var ContentController=function(){function ContentController(layout,content,globalStyles){var _this=this;!function ContentController_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ContentController),ContentController_defineProperty(this,"children",new Map),this.layout=layout,this.children=new Map,this.createContent(content,globalStyles),this.layout.container.on("childRemoved",(function(child){return _this.onChildRemoved(child)}))}return function ContentController_createClass(Constructor,protoProps,staticProps){return protoProps&&ContentController_defineProperties(Constructor.prototype,protoProps),staticProps&&ContentController_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ContentController,[{key:"createContent",value:function createContent(content,parentGlobalStyles){var _this2=this;if(content){var contentType=this.getContentType(content),customID=this.newID;switch(contentType){case"layout":var layout=content;layout.id||(layout.id="layout-".concat(customID)),this.addContentElement(layout.id,layout);break;case"container":this.addContentElement("container-".concat(customID),content);break;case"string":var text=new text_lib.xv(content,this.layout.textStyle);this.addContentElement("text-".concat(customID),text);break;case"text":var textInstance=content;for(var key in this.layout.textStyle){var styleKey=key;textInstance.style[styleKey]=this.layout.textStyle[styleKey]}this.addContentElement("text-".concat(customID),textInstance);break;case"layoutConfig":var layoutConfig=content;parentGlobalStyles&&(layoutConfig.globalStyles?layoutConfig.globalStyles=ContentController_objectSpread(ContentController_objectSpread({},parentGlobalStyles),layoutConfig.globalStyles):layoutConfig.globalStyles=ContentController_objectSpread({},parentGlobalStyles)),layoutConfig.id||(layoutConfig.id="layout-".concat(customID)),this.addContentElement(layoutConfig.id,new Layout(layoutConfig));break;case"object":var contentList=content;for(var id in contentList){var idKey=id,contentElement=content[idKey],_contentType=this.getContentType(contentElement),defaultStyles=this.layout.textStyle;switch(_contentType){case"string":parentGlobalStyles&&parentGlobalStyles[idKey]&&(defaultStyles=ContentController_objectSpread(ContentController_objectSpread({},defaultStyles),stylesToPixiTextStyles(parentGlobalStyles[idKey])));var _text=new text_lib.xv(contentElement,defaultStyles);this.addContentElement(idKey,_text);break;case"text":var _textInstance=contentElement;parentGlobalStyles&&parentGlobalStyles[idKey]&&(defaultStyles=ContentController_objectSpread(ContentController_objectSpread({},defaultStyles),stylesToPixiTextStyles(parentGlobalStyles[idKey]))),_textInstance.style=defaultStyles,this.addContentElement(idKey,_textInstance);break;case"layout":var layoutInstance=contentElement;parentGlobalStyles&&parentGlobalStyles[idKey]&&(layoutInstance.setStyles(parentGlobalStyles[idKey]),layoutInstance.layout.updateParents()),this.createContent(layoutInstance);break;case"container":this.addContentElement(idKey,contentElement);break;case"layoutConfig":this.createContent(ContentController_objectSpread(ContentController_objectSpread({},contentElement),{},{globalStyles:parentGlobalStyles,id:idKey}));break;case"object":case"array":this.createContent(contentElement,parentGlobalStyles)}}break;case"array":content.forEach((function(content){return _this2.createContent(content,parentGlobalStyles)}));break;default:throw new Error("Unknown content type of the layout.")}}}},{key:"addContentElement",value:function addContentElement(id,content){id&&this.children.has(id)&&console.error("Element with '".concat(id,"' duplicates, be careful using id selectors with it.")),this.children.set(id,content),this.layout.container.addChild(content)}},{key:"firstChild",get:function get(){return this.children.get(this.children.keys().next().value)}},{key:"resize",value:function resize(width,height){this.children.forEach((function(child){child instanceof Layout&&child.resize(width,height)}))}},{key:"newID",get:function get(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}},{key:"getByID",value:function getByID(id){var result=this.children.get(id);return result||this.children.forEach((function(child){if(child.layout){var res=child.layout.content.getByID(id);res&&(result=res)}})),result}},{key:"getContentType",value:function getContentType(content){return"string"==typeof content?"string":content instanceof Layout?"layout":content instanceof text_lib.xv?"text":content instanceof sprite_lib.j||content instanceof graphics_lib.TC||content instanceof lib.W2?"container":Array.isArray(content)?"array":"object"===ContentController_typeof(content)?null!=content&&content.content?"layoutConfig":"object":"unknown"}},{key:"removeContent",value:function removeContent(id){var content=this.getByID(id);content&&(this.layout.container.removeChild(content),this.children.delete(id))}},{key:"onChildRemoved",value:function onChildRemoved(child){var registeredChild=this.getChild(child);registeredChild&&(this.children.delete(registeredChild),this.layout.updateParents())}},{key:"getChild",value:function getChild(childInstance){var _step,_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=ContentController_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(this.children.entries());try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=ContentController_slicedToArray(_step.value,2),key=_step$value[0];if(_step$value[1]===childInstance)return key}}catch(err){_iterator.e(err)}finally{_iterator.f()}}}]),ContentController}();function Layout_typeof(o){return Layout_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Layout_typeof(o)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===Layout_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}(this,result)}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function Layout_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function Layout_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Layout_ownKeys(Object(t),!0).forEach((function(r){Layout_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Layout_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function Layout_defineProperty(obj,key,value){return(key=Layout_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Layout_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Layout_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,Layout_toPropertyKey(descriptor.key),descriptor)}}function Layout_createClass(Constructor,protoProps,staticProps){return protoProps&&Layout_defineProperties(Constructor.prototype,protoProps),staticProps&&Layout_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function Layout_toPropertyKey(arg){var key=function Layout_toPrimitive(input,hint){if("object"!==Layout_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==Layout_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===Layout_typeof(key)?key:String(key)}var LayoutSystem=function(){function LayoutSystem(options,container){if(Layout_classCallCheck(this,LayoutSystem),this.container=container||new lib.W2,this.id=null==options?void 0:options.id,null!=options&&options.globalStyles){var styles=options.globalStyles[this.id];styles&&options.styles?options.styles=Layout_objectSpread(Layout_objectSpread({},styles),options.styles):styles&&(options.styles=styles)}this.size=new SizeController(this),this._style=new StyleController(this,null==options?void 0:options.styles),this.align=new AlignController(this),this.content=new ContentController(this,null==options?void 0:options.content,null==options?void 0:options.globalStyles)}return Layout_createClass(LayoutSystem,[{key:"resize",value:function resize(parentWidth,parentHeight){var width=parentWidth||this.contentWidth||this.size.parentWidth,height=parentHeight||this.contentHeight||this.size.parentHeight;this.isPortrait=width<height,this._style.applyConditionalStyles(),this.size.resize(parentWidth,parentHeight)}},{key:"refresh",value:function refresh(){this.resize(this.size.parentWidth,this.size.parentHeight)}},{key:"contentWidth",get:function get(){var _this$container;if(null!==(_this$container=this.container)&&void 0!==_this$container&&_this$container.parent)return this.container.parent.width}},{key:"contentHeight",get:function get(){var _this$container2;if(null!==(_this$container2=this.container)&&void 0!==_this$container2&&_this$container2.parent)return this.container.parent.height}},{key:"width",get:function get(){return this.size.width},set:function set(value){this.size.width=value}},{key:"height",get:function get(){return this.size.height},set:function set(value){this.size.height=value}},{key:"addContent",value:function addContent(content){this.content.createContent(content),this.updateParents()}},{key:"removeChildByID",value:function removeChildByID(id){this.content.removeContent(id)}},{key:"getChildByID",value:function getChildByID(id){return this.content.getByID(id)}},{key:"updateParents",value:function updateParents(){this.getRootLayout().size.resize()}},{key:"getRootLayout",value:function getRootLayout(){var _this$container$paren;return null!==(_this$container$paren=this.container.parent)&&void 0!==_this$container$paren&&_this$container$paren.layout?this.container.parent.layout.getRootLayout():this}},{key:"setStyles",value:function setStyles(styles){this._style.set(styles),this.updateParents()}},{key:"textStyle",get:function get(){return this._style.textStyle}},{key:"style",get:function get(){return this._style.getAll()}},{key:"isRootLayoutPortrait",get:function get(){return!0===this.getRootLayout().isPortrait}}]),LayoutSystem}(),Layout=function(_Container){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(Layout,_Container);var _super=_createSuper(Layout);function Layout(options){var _this;return Layout_classCallCheck(this,Layout),(_this=_super.call(this)).layout=new LayoutSystem(options,_assertThisInitialized(_this)),_this}return Layout_createClass(Layout,[{key:"size",get:function get(){return this.layout.size}},{key:"align",get:function get(){return this.layout.align}},{key:"content",get:function get(){return this.layout.content}},{key:"id",get:function get(){return this.layout.id},set:function set(value){this.layout.id=value}},{key:"contentWidth",get:function get(){return this.layout.contentWidth}},{key:"contentHeight",get:function get(){return this.layout.contentHeight}},{key:"width",get:function get(){return this.layout.width},set:function set(value){this.layout.width=value}},{key:"height",get:function get(){return this.layout.height},set:function set(value){this.layout.height=value}},{key:"addContent",value:function addContent(content){this.layout.addContent(content)}},{key:"removeChildByID",value:function removeChildByID(id){this.layout.removeChildByID(id)}},{key:"getChildByID",value:function getChildByID(id){return this.layout.getChildByID(id)}},{key:"setStyles",value:function setStyles(styles){this.layout.setStyles(styles)}},{key:"textStyle",get:function get(){return this.layout.textStyle}},{key:"style",get:function get(){return this.layout.style}},{key:"resize",value:function resize(parentWidth,parentHeight){this.layout.resize(parentWidth,parentHeight)}},{key:"refresh",value:function refresh(){this.resize(this.size.parentWidth,this.size.parentHeight)}}]),Layout}(lib.W2);lib.W2.prototype.initLayout||Object.defineProperty(lib.W2.prototype,"initLayout",{value:function value(options){return this.layout||(this.layout=new LayoutSystem(options,this)),this}})},"./src/stories/utils/argTypes.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}__webpack_require__.d(__webpack_exports__,{P:()=>argTypes,V:()=>getDefaultArgs});var controls={select:{control:{type:"select"}},check:{control:{type:"check"}},color:{control:{type:"color"}},count:{control:{type:"range"}},type:{control:{type:"radio"}},date:{control:{type:"date"}},switch:{control:{type:"boolean"}}},argTypes=function argTypes(args){var exportArgTypes={};for(var key in args)if("number"==typeof args[key]){var min=0,number=args[key];(key.includes("font")||key.includes("amount"))&&(min=1),exportArgTypes[key]=number>=0?number>=100?{control:{type:"range",min,max:1e3,step:10}}:number>10?{control:{type:"range",min,max:100,step:1}}:number<=1?{control:{type:"range",min,max:1,step:.1}}:{control:{type:"range",min,max:10,step:1}}:number<=-100?{control:{type:"range",min:-1e3,max:1e3,step:10}}:number<-10?{control:{type:"range",min:-100,max:100,step:10}}:number>=-1?{control:{type:"range",min:-1,max:0,step:.1}}:{control:{type:"range",min:-10,max:10,step:1}}}else switch(getArgType(key)&&(exportArgTypes[key]=getArgType(key)),_typeof(args[key])){case"object":exportArgTypes[key]={},exportArgTypes[key]=_objectSpread({},controls.select),Array.isArray(args[key])?exportArgTypes[key].options=args[key]:exportArgTypes[key].options=Object.keys(args).map((function(key){return args[key]}));break;case"boolean":exportArgTypes[key]=controls.switch}return exportArgTypes};function getArgType(type){for(var control in controls)if(type.toLowerCase().indexOf(control)>-1)return controls[control]}var getDefaultArgs=function getDefaultArgs(args){var exportArgs={};for(var key in args)if("object"===_typeof(args[key]))Array.isArray(args[key])&&(exportArgs[key]=args[key][0]);else exportArgs[key]=args[key];return exportArgs}},"./src/utils/constants.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D4:()=>CSS_COLOR_NAMES,Hp:()=>ALIGN,Vr:()=>POSITION,oX:()=>VERTICAL_ALIGN,qk:()=>OVERFLOW,rZ:()=>LOREM_TEXT});var CSS_COLOR_NAMES={white:16777215,red:16711680,green:32768,blue:255,gray:8421504,yellow:16776960,gold:16766720,aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,blanchedalmond:16772045,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,goldenrod:14329120,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,whitesmoke:16119285,yellowgreen:10145074,black:0},LOREM_TEXT="Lorem ipsum dolor, sit amet consectetur adipisicing elit. \n\nAb praesentium velit minima unde beatae. Illo earum, rem iure unde nemo, \n\nexercitationem nesciunt et voluptas nisi adipisci, provident cupiditate veritatis magnam?",OVERFLOW=["visible","hidden"],POSITION=["center","left","right","top","bottom","leftTop","rightTop","leftBottom","rightBottom","topLeft","topRight","bottomLeft","bottomRight","centerTop","centerBottom","centerLeft","centerRight","topCenter","bottomCenter","leftCenter","rightCenter"],ALIGN=["center","left","right","justify"],VERTICAL_ALIGN=["middle","top","bottom"]}}]);