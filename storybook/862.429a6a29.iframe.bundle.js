"use strict";(self.webpackChunk_pixi_layout=self.webpackChunk_pixi_layout||[]).push([[862],{"./node_modules/@pixi/ui/lib/ProgressBar.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k:()=>ProgressBar});var _pixi_display__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@pixi/display/lib/index.mjs"),_pixi_graphics__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@pixi/graphics/lib/index.mjs"),_utils_helpers_view_mjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@pixi/ui/lib/utils/helpers/view.mjs");class ProgressBar extends _pixi_display__WEBPACK_IMPORTED_MODULE_0__.W2{constructor({bg,fill,fillOffset,progress}){if(super(),this.progressStart=0,this._progress=0,this.innerView=new _pixi_display__WEBPACK_IMPORTED_MODULE_0__.W2,this.addChild(this.innerView),this.bg=new _pixi_display__WEBPACK_IMPORTED_MODULE_0__.W2,this.bg.addChild((0,_utils_helpers_view_mjs__WEBPACK_IMPORTED_MODULE_2__.X)(bg)),this.innerView.addChild(this.bg),fill){this.fill=new _pixi_display__WEBPACK_IMPORTED_MODULE_0__.W2,this.fill.addChild((0,_utils_helpers_view_mjs__WEBPACK_IMPORTED_MODULE_2__.X)(fill));const offsetX=fillOffset?.x??0,offsetY=fillOffset?.y??0;this.fill.x=(this.bg.width-this.fill.width)/2+offsetX,this.fill.y=(this.bg.height-this.fill.height)/2+offsetY,this.fillMask=new _pixi_graphics__WEBPACK_IMPORTED_MODULE_1__.TC,this.fill.addChild(this.fillMask),this.fill.mask=this.fillMask,this.addChild(this.fill)}this.progress=progress}validate(progress){return(progress=Math.round(progress))<0?0:progress>100?100:progress}set progress(progress){this._progress=this.validate(progress);const startPoint=this.bg.width/100*this.progressStart,endPoint=this.bg.width/100*this._progress-startPoint;this.fillMask&&this.fillMask.clear().lineStyle(0).beginFill(16777215).drawRect(startPoint,0,endPoint,this.fill.height)}get progress(){return this._progress}}},"./node_modules/@pixi/ui/lib/ScrollBox.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>ScrollBox});var lib=__webpack_require__("./node_modules/@pixi/core/lib/index.mjs"),display_lib=__webpack_require__("./node_modules/@pixi/display/lib/index.mjs"),graphics_lib=__webpack_require__("./node_modules/@pixi/graphics/lib/index.mjs"),sprite_lib=__webpack_require__("./node_modules/@pixi/sprite/lib/index.mjs");class Layout extends display_lib.W2{constructor(options){super(),this.children=[],this.options=options,options?.type&&(this.type=options.type),options?.children&&options.children.map((child=>this.addChild(child)))}onChildrenChange(){let x=this.options?.horPadding??0,y=this.options?.vertPadding??0;const elementsMargin=this.options?.elementsMargin??0;this.children.forEach((child=>{switch(!this.type&&x+child.width>=this.parent.width?(y+=elementsMargin+child.height,x=this.options?.horPadding??0,child.x=x,child.y=y):(child.x=x,child.y=y),this.type){case"horizontal":default:x+=elementsMargin+child.width;break;case"vertical":y+=elementsMargin+child.height}}))}}class Spring{constructor(options={}){this.x=0,this.ax=0,this.dx=0,this.tx=0,this._options=options,this._options.max=options.max||160,this._options.damp=options.damp||.8,this._options.springiness=options.springiness||.1}update(){this.ax=(this.tx-this.x)*this._options.springiness,this.dx+=this.ax,this.dx*=this._options.damp,this.dx<-this._options.max?this.dx=-this._options.max:this.dx>this._options.max&&(this.dx=this._options.max),this.x+=this.dx}reset(){this.x=0,this.ax=0,this.dx=0,this.tx=0}get max(){return this._options.max}set max(value){this._options.max=value}get damp(){return this._options.damp}set damp(value){this._options.damp=value}get springiness(){return this._options.springiness}set springiness(value){this._options.springiness=value}}class ScrollSpring{constructor(){this._spring=new Spring,this._pos=0,this.to=0}start(speed,pos,to){this._speed=speed,this._pos=pos,this.to=to,this.done=!1,this._spring.x=this._pos,this._spring.tx=this.to;const diff=this.to-this._pos,toDirection=Math.abs(diff)/diff,currentDirection=Math.abs(this._speed)/this._speed;this._correctSpeed=toDirection!==currentDirection}update(){if(this._correctSpeed)this._speed*=.6,Math.abs(this._speed)<2&&(this._correctSpeed=!1),this._pos+=this._speed,this._spring.x=this._pos;else{const diff=this.to-this._pos;Math.abs(diff)<.05?(this._pos=this.to,this.done=!0):(this._spring.tx=this.to,this._spring.update(),this._pos=this._spring.x)}return this._pos}cancel(){}}class SlidingNumber{constructor(options={}){this.position=0,this.constrain=!0,this.min=0,this.max=0,this.maxSpeed=400,this._offset=0,this._prev=0,this._speed=0,this._targetSpeed=0,this._speedChecker=0,this._grab=0,this.constrain=options.constrain??!0,this.maxSpeed=options.maxSpeed??400,this._ease=options.ease??new ScrollSpring}set value(n){this._speed=0,this.position=n}get value(){return this.position}grab(offset){this._grab=offset,this._offset=this.position-offset,this._speedChecker=0,this._targetSpeed=this._speed=0,this._hasStopped=!1}hold(newPosition){this._speedChecker++,this.position=newPosition+this._offset,this._speedChecker>1&&(this._targetSpeed=this.position-this._prev),this._speed+=(this._targetSpeed-this._speed)/2,this._speed>this.maxSpeed?this._speed=this.maxSpeed:this._speed<-this.maxSpeed&&(this._speed=-this.maxSpeed),this._prev=this.position,this.constrain&&(this._activeEase=null,this.position>this.min?this.position-=(this.position-this.min)/1.5:this.position<this.max&&(this.position+=(this.max-this.position)/1.5))}slide(){this._hasStopped||(this.constrain?this._updateConstrain():this._updateDefault())}get moveAmount(){return-(this.position-this._offset-this._grab)}_updateDefault(){this._speed*=.9,this.position+=this._speed,(this._speed<0?-1*this._speed:this._speed)<.01&&(this._hasStopped=!0)}_updateConstrain(){const max=this.max;this.position>this.min||this.position<max||this._activeEase?(this._activeEase||(this._activeEase=this._ease,this.position>this.min?this._activeEase.start(this._speed,this.position,this.min):this._activeEase.start(this._speed,this.position,max)),this.position=this._activeEase.update(),this._activeEase.done&&(this.position=this._activeEase.to,this._speed=0,this._activeEase=null)):this._updateDefault()}}class Trackpad{constructor(options){this.xAxis=new SlidingNumber({ease:options.xEase,maxSpeed:options.maxSpeed,constrain:options.constrain}),this.yAxis=new SlidingNumber({ease:options.yEase,maxSpeed:options.maxSpeed,constrain:options.constrain}),this._frame=new lib.Ae,this._bounds=new lib.Ae,this._globalPosition=new lib.E9}pointerDown(pos){this.xAxis.grab(pos.x),this.yAxis.grab(pos.y),this._isDown=!0}pointerUp(){this._isDown=!1}pointerMove(pos){this._globalPosition=pos}update(){this._dirty&&(this._dirty=!1,this.xAxis.min=this._bounds.left,this.xAxis.min=this._bounds.right-this._frame.width,this.xAxis.min=this._bounds.top,this.xAxis.min=this._bounds.bottom-this._frame.height),this._isDown?(this.xAxis.hold(this._globalPosition.x),this.yAxis.hold(this._globalPosition.y)):(this.xAxis.slide(),this.yAxis.slide())}resize(w,h){this._frame.x=0,this._frame.width=w,this._frame.y=0,this._frame.height=h,this._dirty=!0}setBounds(minX,maxX,minY,maxY){this._bounds.x=minX,this._bounds.width=maxX-minX,this._bounds.y=minY,this._bounds.height=maxY-minY,this._dirty=!0}get x(){return this.xAxis.value}get y(){return this.yAxis.value}}class ScrollBox extends display_lib.W2{constructor(options){super(),this.__width=0,this.__height=0,this.freeSlot={x:0,y:0},this.isDragging=0,this.childrenInteractiveStorage=[],this.ticker=lib.vB.shared,this.options=options,this.addBackground(),this.__width=options.width|this.background.width,this.__height=options.height|this.background.height,options.vertPadding||(options.vertPadding=options.padding??0),options.horPadding||(options.horPadding=options.padding??0),this.layout=new Layout({type:options.type,elementsMargin:options.elementsMargin,vertPadding:options.vertPadding,horPadding:options.horPadding}),super.addChild(this.layout),options.items?.length&&options.items.forEach((item=>{this.addItem(item)})),this.hasBounds&&(this.addMask(),this.makeScrollable()),this.onMouseScrollBinded=this.onMouseScroll.bind(this);const spring=new ScrollSpring;this._trackpad=new Trackpad({constrain:!0,yEase:spring}),this._trackpad.xAxis.value=0,this._trackpad.yAxis.value=0,this.resize(),this.ticker.add(this.update,this)}get hasBounds(){return!!this.__width||!!this.__height}onChildrenChange(){}addItem(...items){if(items.length>1)items.forEach((item=>this.addItem(item)));else{const child=items[0];child.width&&child.height||console.error("ScrollBox item should have size"),child.x=this.freeSlot.x,child.y=this.freeSlot.y,this.layout.addChild(child),this.options.disableDynamicRendering||(child.renderable=this.isItemVisible(child));const elementsMargin=this.options?.elementsMargin??0;if("horizontal"===this.options.type)this.freeSlot.x+=elementsMargin+child.width;else this.freeSlot.y+=elementsMargin+child.height}return this.resize(),items[0]}removeItem(itemID){const child=this.layout.children[itemID];child&&(this.layout.removeChild(child),this.resize())}isItemVisible(item){const isVertical="vertical"===this.options.type||!this.options.type;let isVisible=!1;const layout=this.layout;if(isVertical){const posY=item.y+layout.y;posY+item.height+this.options.vertPadding>=0&&posY-this.options.vertPadding-this.options.elementsMargin<=this.options.height&&(isVisible=!0)}else{const posX=item.x+layout.x;posX+item.width>=0&&posX<=this.options.width&&(isVisible=!0)}return isVisible}get items(){return this.layout?.children??[]}addBackground(){this.background="string"==typeof this.options.background?sprite_lib.j.from(this.options.background):new graphics_lib.TC,this.addChild(this.background),this.resize()}addMask(){this.borderMask=new graphics_lib.TC,super.addChild(this.borderMask),this.mask=this.borderMask,this.resize()}makeScrollable(){this.on("pointerdown",(e=>{this.isDragging=1,this._trackpad.pointerDown(e.global)})),this.on("pointerup",(()=>{this.isDragging=0,this._trackpad.pointerUp(),this.restoreChildrenInteractivity()})),this.on("pointerupoutside",(()=>{this.isDragging=0,this._trackpad.pointerUp(),this.restoreChildrenInteractivity()})),this.on("globalpointermove",(e=>{this._trackpad.pointerMove(e.global),this.isDragging&&this.disableChildrenInteractivity()}));const{onMouseHover,onMouseOut}=this;this.on("mouseover",onMouseHover,this).on("mouseout",onMouseOut,this)}disableChildrenInteractivity(){this.items.forEach(((item,itemID)=>{this.childrenInteractiveStorage[itemID]||(this.childrenInteractiveStorage[itemID]=!0===item.interactive),item.interactive=!1}))}restoreChildrenInteractivity(){this.items.forEach(((item,itemID)=>{const wasItemInteractive=!0===this.childrenInteractiveStorage[itemID];wasItemInteractive&&(item.interactive=wasItemInteractive,delete this.childrenInteractiveStorage[itemID])}))}setInteractive(interactive){this.interactive=interactive}get layoutHeight(){return this.layout.height+2*this.options.vertPadding}get layoutWidth(){return this.layout.width+2*this.options.horPadding}resize(){if(this.renderAllItems(),this.borderMask&&(this.lastWidth!==this.layoutWidth||this.lastHeight!==this.layoutHeight)){const verPadding=this.options.vertPadding,horPadding=this.options.horPadding;this.options.width||(this.__width+=this.layoutWidth),this.options.height||(this.__height+=this.layoutHeight),this.borderMask.clear().lineStyle(0).beginFill(16777215).drawRoundedRect(0,0,this.__width,this.__height,0|this.options.radius),function removeHitBox(...obj){obj.forEach((o=>o&&(o.hitArea=new lib.Ae)))}(this.borderMask),this.background instanceof graphics_lib.TC&&"number"==typeof this.options.background&&this.background.clear().lineStyle(0).beginFill(this.options.background).drawRect(0,0,this.__width+horPadding,this.__height+verPadding),"horizontal"===this.options.type?this.setInteractive(this.layoutWidth>this.__width):this.setInteractive(this.layoutHeight>this.__height),this.lastWidth=this.layoutWidth,this.lastHeight=this.layoutHeight}if(this._trackpad){const maxWidth=this.borderMask.width-this.layout.width-2*this.options.horPadding,maxHeight=this.borderMask.height-this.layout.height-2*this.options.vertPadding;"vertical"===this.options.type?this._trackpad.yAxis.max=-Math.abs(maxHeight):("horizontal"===this.options.type||(this._trackpad.yAxis.max=-Math.abs(maxHeight)),this._trackpad.xAxis.max=-Math.abs(maxWidth))}this.stopRenderHiddenItems()}onMouseHover(){this.renderAllItems(),document.addEventListener("mousewheel",this.onMouseScrollBinded),document.addEventListener("DOMMouseScroll",this.onMouseScrollBinded)}onMouseOut(){this.stopRenderHiddenItems(),document.removeEventListener("mousewheel",this.onMouseScrollBinded),document.removeEventListener("DOMMouseScroll",this.onMouseScrollBinded)}onMouseScroll(event){if(this.renderAllItems(),"horizontal"!==this.options.type||void 0===event.deltaX&&void 0===event.deltaY){if(void 0!==event.deltaY){const targetPos=this.layout.y-event.deltaY;targetPos<0&&targetPos+this.layoutHeight+this.options.vertPadding<this.__height?this._trackpad.yAxis.value=this.__height-this.layoutHeight:targetPos>this.options.vertPadding?this._trackpad.yAxis.value=0:this._trackpad.yAxis.value=targetPos}}else{const targetPos=event.deltaY?this.layout.x-event.deltaY:this.layout.x-event.deltaX;targetPos<0&&targetPos+this.layoutWidth+this.options.horPadding<this.__width?this._trackpad.xAxis.value=this.__width-this.layoutWidth:targetPos>this.options.horPadding?this._trackpad.xAxis.value=0:this._trackpad.xAxis.value=targetPos}this.stopRenderHiddenItems()}scrollBottom(){this.interactive?this.scrollTo(this.layout.children.length-1):this.scrollTop()}scrollTop(){this._trackpad.xAxis.value=0,this._trackpad.yAxis.value=0}renderAllItems(){this.options.disableDynamicRendering||this.items.forEach((child=>{child.renderable=!0}))}stopRenderHiddenItems(){this.options.disableDynamicRendering||this.items.forEach((child=>{child.renderable=this.isItemVisible(child)}))}scrollTo(elementID){if(!this.interactive)return;const target=this.layout.children[elementID];target&&(this._trackpad.xAxis.value="horizontal"===this.options.type?this.__width-target.x-target.width-this.options.horPadding:0,this._trackpad.yAxis.value=this.options.type&&"vertical"!==this.options.type?0:this.__height-target.y-target.height-this.options.vertPadding)}get height(){return this.__height}get width(){return this.__width}update(){this._trackpad.update(),"horizontal"===this.options.type?this.layout.x!==this._trackpad.x?(this.renderAllItems(),this.layout.x=this._trackpad.x):this.stopRenderHiddenItems():this.layout.y!==this._trackpad.y?(this.renderAllItems(),this.layout.y=this._trackpad.y):this.stopRenderHiddenItems()}}}}]);